# SSE（Server-Send Events）

服务端向客户端推送数据的实现方案有三种：

- 轮询
- websocket
- SSE

## 轮循（最下策）

- 首先轮询需要不断的发起请求，每一个请求都需要经过 http 建立连接的流程（比如三次握手，四次挥手），是没有必要的消耗。
- 客户端需要从页面被打开的那一刻开始就一直处理请求。虽然每次轮询的消耗不大，但是一直处理请求对于客户端来说一定是不友好的。
- 浏览器请求并发是有限制的。比如 Chrome 最大并发请求数目为 6，这个限制还有一个前提是针对同一域名的，超过这一限制的后续请求将会被阻塞。而轮询意味着会有一个请求长时间的占用并发名额。
- 如果轮询时间较长，可能又没有办法非常及时的获取数据

## websocket 对比 SSE

- websocket 是一个新的协议，ws/wss。也就是说，支持 http 协议的浏览器不一定支持 ws 协议；SSE 则是部署在 HTTP 协议之上的，现有的服务器软件都支持。
- WebSocket 是全双工通道，可以双向通信，功能更强；SSE 是单向通道，只能服务器向浏览器端发送。
- SSE 是一个轻量级协议，相对简单；WebSocket 是一种较重的协议，相对复杂。
- SSE 默认支持断线重连，WebSocket 则需要额外部署。
- SSE 一般只用来传送文本，二进制数据需要编码后传送，WebSocket 默认支持传送二进制数据
- SSE 支持自定义发送的数据类型。
- 小程序不支持 SSE

## 适用业务场景

- 比如：数据大屏的实时数据，消息中心的消息推送等一系列只需要服务端单方面推送而不需要客户端同时进行反馈的需求，SSE 就是不二之选。
- 最典型的就是聊天功能。这种服务端需要主动向客户端推送信息，并且客户端也有向服务端推送消息的需求时，Websocket 就是更好的选择。

## 示例
