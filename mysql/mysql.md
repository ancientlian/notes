## 数据库分类

关系型

- 通过表和表，行和列之间的关系进行数据的存储

非关系型（MoSQL）

Redis，MongDB

- 对象存储，通过对象的自身的属性来决定

## DBMS数据库管理系统



## 安装mysql



## 连接数据库

命令行连接

```sql
mysql -uroot -p123456 --连接数据库 

/*
多行注释
*/

--修改用户密码

----------------------------
-- 所有语句使用分号结尾
show databases; 

use school

show tables

describe student; --显示数据库中所有的表的信息

create database example


exit;
```



## 操作数据库

**mysql不区分大小写**

### 创建数据库

```sql
create database [if not exists] exmp
```

### 删除数据库

```sql
drop database [if exists] exmp
```

### 使用数据库

```sql
use `school`
```

### 查看数据库

```sql
show databases
```



## 数据类型

### 数值

| 类型                            | 大小                                         | 用途             |
| ------------------------------- | -------------------------------------------- | ---------------- |
| tinyint                         | 1 byte                                       | 小整数值         |
| smallint                        | 2 byte                                       | 大整数值         |
| mediumint                       | 3 byte                                       | 大整数值         |
| **int**                         | 4 byte                                       | 大整数值         |
| bigint                          | 8 byte                                       | 极大整数值       |
| float                           | 4 byte                                       | 单精度           |
| double                          | 8 byte                                       | 双精度           |
| decimal<br />字符串形成的浮点数 | 对DECIMAL(M,D) <br />如果M>D，为M+2否则为D+2 | 小数（金融计算） |

### 字符串

| 类型        | 大小                  | 用途                            |
| :---------- | :-------------------- | :------------------------------ |
| char        | 0-255 bytes           | 定长字符串                      |
| **varchar** | 0-65535 bytes         | 变长字符串                      |
| tinyblob    | 0-255 bytes           | 不超过 255 个字符的二进制字符串 |
| tinytext    | 0-255 bytes           | 短文本字符串                    |
| blob        | 0-65535 bytes         | 二进制形式的长文本数据          |
| **text**    | 0-65535 bytes(2^16-1) | 长文本数据                      |
| MEDIUMBLOB  | 0-16 777 215 bytes    | 二进制形式的中等长度文本数据    |
| MEDIUMTEXT  | 0-16 777 215 bytes    | 中等长度文本数据                |
| LONGBLOB    | 0-4 294 967 295 bytes | 二进制形式的极大文本数据        |
| LONGTEXT    | 0-4 294 967 295 bytes | 极大文本数据                    |

### 时间日期

| 类型         | 大小 ( bytes) | 格式                | 用途                         |
|:------------ |:------------- |:------------------- |:---------------------------- |
| date         | 3             | YYYY-MM-DD          | 日期值                       |
| time         | 3             | HH:MM:SS            | 时间值或持续时间             |
| YEAR         | 1             | YYYY                | 年份值                       | 
| **datetime** | 8             | YYYY-MM-DD HH:MM:SS | 混合日期和时间值             |
| timestamp    | 4             | YYYYMMDD HHMMSS     | 混合日期和时间值，**时间戳** |

### null

没有值，未知

不要使用null进行运算，结果为null



## 字段属性

### unsigned

无符号整数，即不能声明为负数

### zerofill

不足位数使用0填充



### auto_increment

自增，通常用来设计唯一的主键~index

可以自定义起始值和步长

### 非空

设置为not null，不赋值就会报错

### 拓展

/*
每一一个表，都必须存在以下五个字段!未来做项目用的，表示个记录存在意义!
id主键
version乐观锁
is_delete伪删除
gmt_ create创建时间
gmt_ update 修改时间
*/

## 创建数据库



## 数据表的类型

INNODB默认使用

MYISAM早期使用

|          | MYISAM | INNODB                                                       |
| -------- | ------ | ------------------------------------------------------------ |
| 事务     | 不支持 | 支持                                                         |
| 锁       | 表级锁 | 行级锁                                                       |
| 外键约束 | 不支持 | 支持                                                         |
| 全文索引 | 支持   | 使用sphinx插件支持全文索引                                   |
| 存储空间 | 较小   | 需要更多的内存和存储<br />它会在主内存中建立其专用的缓冲池用于高速缓冲数据和索引 |



### 在物理空间存在的位置

所有的数据库文件都存在data目录下，一个文件夹就对应一-个数据库
本质还是文件的存储!
MySQL引擎在物理文件上的区别

- InnoDB在数据库表中只有一一个\*.frm文件，以吸上级目录下的ibdata1文件

- MYISAM对应文件
  - \*.frm	表结构的定义文件
  - \*.MYD    数据文件(data)
  - \*.MYI	索引文件(index)

### 设置数据库表的字符集编码

```sql
charset=utf-8
```

不设置的话，会是mysql 默认的字符集编码~ (不支持中文! )

MySQL的默认编码是Latin1,不支持中文

在myini中配置默认的编码

```sql
character-set-server=utf8
```



## 修改删除表

修改表名

增加表的字段

修改表的字段

删除表的字段

删除表

**所有的创建和删除操作尽量加上报错，以免报错**



## 数据管理



























## 规范数据库设计

糟糕的数据库设计

- 数据冗余，浪费空间





良好的数据库设计

- 节省内存空间
- 保证数据库的完整性
- 方便开发系统

关于数据库的设计

- 分析需求：
- 概要设计：

设计数据库的步骤：

- 收集信息，分析需求
  - 用户表
  - 分类表（文章分类，谁创建的
  - 文章表
  - 评论表
  - 友链表（友链信息）
  - 自定义表（系统信息，某个关键的字，或者一些主字段）
  - 说说表（发表心情
- 标识实体（需求落实
- 标识实体之间的关系
  - 写博客：user--》blog
  - 创建分类：user--》blog
  - 关注：user--》user
  - 友链：links
  - 评论：user--》user--》blog



## 三大范式

### 为什么需要用户规范

- 信息重复
- 更新异常
- 插入异常
  - 无法正常显示信息
- 删除异常
  - 丢失有效信息

### 第一范式（1NF）

原子性：保证每一列不可分

### 第二范式（2NF）

**第二范式需要确保数据库表中的每一列都和主键相关，而不能只与主键的某一部分相关（主要针对联合主键而言）**

### 第三范式（3NF）

**第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。**



规范性和性能问题

关联查询的表不得超过三张表

- 考虑商业化的需求和目标，(成本， 用户体验! )数据库的性能更加重要
- 在规范性能的问题的时候，需要适当的考虑一下 规范性!
- 故意给某些表增加一-些冗余的字段。(从多表查询中变为单表查询)
- 故意增加一-些计算列(从大数据 量降低为小数据量的查询:索引)





